<html><head><link rel="import" href="./warp10-gts-tools.html"><script>(()=>{let a={id:[],data:[],names:[],color:[],params:[]};a.isPlotted=function(b){return b&&b.id&&0<=a.id.indexOf(b.id)},a.palette=['#001f3f','#0074D9','#7FDBFF','#39CCCC','#3D9970','#2ECC40','#01FF70','#FFDC00','#FF851B','#FF4136','#85144b','#F012BE','#B10DC9','#111111','#AAAAAA','#DDDDDD'],a.maxColors=16,a.currentColorIndex=-1,a.gtsColor=function(b){if(!a.isPlotted(b))return'';let c=a.id.indexOf(b.id);return'background-color:'+a.params[c].color+';'},a.getColor=function(b){return a.palette[b%a.maxColors]},a.nextColor=function(){return a.currentColorIndex+=1,a.getColor(a.currentColorIndex)},a.currentColor=function(){return a.getColor(a.currentColorIndex)},a.removeColorIfLast=function(b){if(b===a.currentColor())return a.currentColorIndex-=1},a.add=function(b){a.isPlotted(b)||(console.debug('[warp10-gts-plotting-tools] plottingTools.add()',b),a.data.push(b),a.names.push({c:b.c,l:b.l,id:b.id}),a.params.push({color:a.nextColor()}),a.id.push(b.id))},a.remove=function(b){let c;a.isPlotted(b)&&(c=a.id.indexOf(b.id),-1<c&&(a.id.splice(c,1),a.data.splice(c,1),a.names.splice(c,1),a.removeColorIfLast(a.params[c].color),a.params.splice(c,1)))},a.refresh=function(b){console.debug('[warp10-gts-plotting-tools] plottingTools.refresh()',b);let c=[];a.id.forEach(()=>{c.push(!1)}),console.debug('[warp10-gts-plotting-tools] plottingTools.refresh() - gtsInPlottedStillExists',c),b.forEach((b)=>{if(a.isPlotted(b)){let d=a.id.indexOf(b.id);gtsTools.equalMetadata(a.names[d],b)&&(a.data[d]=b,c[d]=!0)}});for(let d=c.length-1;0<=d;d--)c[d]||(a.id.splice(d,1),a.data.splice(d,1),a.names.splice(d,1),a.removeColorIfLast(a.params[d].color),a.params.splice(d,1));console.debug('[warp10-gts-plotting-tools] plottingTools.refresh() - plottingTools',a)},a.gtsToNvd3=function(a){console.warning('[warp10-gts-plotting-tools] Deprecated function gtsToNvd3() - Please don\'t use it ');let b={key:'',values:[],c:'',l:'',id:''};if(b.c=a.c,b.l=a.l,b.id=a.id,b.key=' '+a.id+' - '+a.c,null!==a.l&&(b.key+=' - '+JSON.stringify(a.l)),void 0!==a.v){let c=a.v.sort(function(c,a){return c.ts-a.ts});c.forEach((a)=>{b.values.push({x:Math.round(a.ts/1e3),y:a.value})})}return b},a.toNvd3Graph=function(){let b={},c=[];console.debug('[warp10-gts-plotting-tools] toNvd3Graph',a.data),a.data.forEach((b,d)=>{if(a.isGtsToPlot(b)){let b=a.data[d];b.color=a.params[d].color,b.key=a.data[d].key,b.area=!1,b.interpolate='step-before',c.push(b)}});return b.sparklines=c,b.tickFormat=function(a){let b=c[0].values[a]&&c[0].values[a].x||0;return b?d3.time.format('%x')(new Date(b)):''},b},a.isArray=function(a){return a&&'object'===typeof a&&a instanceof Array&&'number'===typeof a.length&&'function'===typeof a.splice&&!a.propertyIsEnumerable('length')},a.isGts=function(b){return null!==b.c&&null!==b.l&&null!==b.values&&a.isArray(b.values)},a.isGtsToPlot=function(b){return!!a.isGts(b)&&'number'===typeof b.values[0].y},a.MIN_TS=0,a.MAX_TS=9007199254740991,a.getTimeBounds=function(b){let c={};if(!a.isArray(b))return c;c.min=a.MAX_TS,c.max=a.MIN_TS;for(let a,d=0;d<b.length;d++)a=b[d],c.min>a.values[0].x&&(c.min=a.values[0].x),c.max<a.values[a.values.length-1].x&&(c.max=a.values[a.values.length-1].x);return c},window.plottingTools=a}).call(this);</script></head><body></body></html>