ace.define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],function(a,b){"use strict";var c=Math.max,d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=a("./lib/lang"),g=a("./range").Range,h=a("./anchor").Anchor,i=a("./keyboard/hash_handler").HashHandler,j=a("./tokenizer").Tokenizer,k=g.comparePoints,l=function(){this.snippetMap={},this.snippetNameMap={}};(function(){d.implement(this,e),this.getTokenizer=function(){function a(a,b,c){return a=a.substr(1),/^\d+$/.test(a)&&!c.inFormatString?[{tabstopId:parseInt(a,10)}]:[{text:a}]}function b(a){return"(?:[^\\\\"+a+"]|\\\\.)"}return l.$tokenizer=new j({start:[{regex:/:/,onMatch:function(a,b,c){return c.length&&c[0].expectIf?(c[0].expectIf=!1,c[0].elseBranch=c[0],[c[0]]):":"}},{regex:/\\./,onMatch:function(a,b,c){var d=a[1];return"}"==d&&c.length?a=d:-1=="`$\\".indexOf(d)?c.inFormatString&&("n"==d?a="\n":"t"==d?a="\n":-1!="ulULE".indexOf(d)&&(a={changeCase:d,local:"a"<d})):a=d,[a]}},{regex:/}/,onMatch:function(a,b,c){return[c.length?c.shift():a]}},{regex:/\$(?:\d+|\w+)/,onMatch:a},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(b,c,d){var e=a(b.substr(1),c,d);return d.unshift(e[0]),e},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+b("\\|")+"*\\|",onMatch:function(a,b,c){c[0].choices=a.slice(1,-1).split(",")},next:"start"},{regex:"/("+b("/")+"+)/(?:("+b("/")+"*)/)(\\w*):?",onMatch:function(a,b,c){var d=c[0];return d.fmtString=a,a=this.splitRegex.exec(a),d.guard=a[1],d.fmt=a[2],d.flag=a[3],""},next:"start"},{regex:"`"+b("`")+"*`",onMatch:function(a,b,c){return c[0].code=a.splice(1,-1),""},next:"start"},{regex:"\\?",onMatch:function(a,b,c){c[0]&&(c[0].expectIf=!0)},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+b("/")+"+)/",token:"regex"},{regex:"",onMatch:function(a,b,c){c.inFormatString=!0},next:"start"}]}),l.prototype.getTokenizer=function(){return l.$tokenizer},l.$tokenizer},this.tokenizeTmSnippet=function(a,b){return this.getTokenizer().getLineTokens(a,b).tokens.map(function(a){return a.value||a})},this.$getDefaultValue=function(a,b){if(/^[A-Z]\d+$/.test(b)){var c=b.substr(1);return(this.variables[b[0]+"__"]||{})[c]}if(/^\d+$/.test(b))return(this.variables.__||{})[b];if(b=b.replace(/^TM_/,""),!!a){var d=a.session;switch(b){case"CURRENT_WORD":var e=d.getWordRange();case"SELECTION":case"SELECTED_TEXT":return d.getTextRange(e);case"CURRENT_LINE":return d.getLine(a.getCursorPosition().row);case"PREV_LINE":return d.getLine(a.getCursorPosition().row-1);case"LINE_INDEX":return a.getCursorPosition().column;case"LINE_NUMBER":return a.getCursorPosition().row+1;case"SOFT_TABS":return d.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return d.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace";}}},this.variables={},this.getVariableValue=function(a,b){return this.variables.hasOwnProperty(b)?this.variables[b](a,b)||"":this.$getDefaultValue(a,b)||""},this.tmStrFormat=function(a,b,c){var d=b.flag||"",e=b.guard;e=new RegExp(e,d.replace(/[^gi]/,""));var f=this.tokenizeTmSnippet(b.fmt,"formatString"),g=this,h=a.replace(e,function(){g.variables.__=arguments;for(var a,b=g.resolveVariables(f,c),d="E",e=0;e<b.length;e++)if(a=b[e],"object"!=typeof a)"U"==d?b[e]=a.toUpperCase():"L"==d&&(b[e]=a.toLowerCase());else if(b[e]="",a.changeCase&&a.local){var h=b[e+1];h&&"string"==typeof h&&(b[e]="u"==a.changeCase?h[0].toUpperCase():h[0].toLowerCase(),b[e+1]=h.substr(1))}else a.changeCase&&(d=a.changeCase);return b.join("")});return this.variables.__=null,h},this.resolveVariables=function(a,b){function c(b){var c=a.indexOf(b,f+1);-1!=c&&(f=c)}for(var d,e=[],f=0;f<a.length;f++)if(d=a[f],"string"==typeof d)e.push(d);else if("object"!=typeof d)continue;else if(d.skip)c(d);else if(d.processed<f)continue;else if(d.text){var g=this.getVariableValue(b,d.text);g&&d.fmtString&&(g=this.tmStrFormat(g,d)),d.processed=f,null==d.expectIf?g&&(e.push(g),c(d)):g?d.skip=d.elseBranch:c(d)}else null==d.tabstopId?null!=d.changeCase&&e.push(d):e.push(d);return e},this.insertSnippetForSelection=function(a,b){function d(a){for(var b,c=[],d=0;d<a.length;d++){if(b=a[d],"object"==typeof b){if(n[b.tabstopId])continue;var e=a.lastIndexOf(b,d-1);b=c[e]||{tabstopId:b.tabstopId}}c[d]=b}return c}var e=a.getCursorPosition(),f=a.session.getLine(e.row),g=a.session.getTabString(),h=f.match(/^\s*/)[0];e.column<h.length&&(h=h.slice(0,e.column)),b=b.replace(/\r/g,"");var j=this.tokenizeTmSnippet(b);j=this.resolveVariables(j,a),j=j.map(function(a){return"\n"==a?a+h:"string"==typeof a?a.replace(/\t/g,g):a});var k=[];j.forEach(function(a,b){if("object"==typeof a){var c=a.tabstopId,d=k[c];if(d||(d=k[c]=[],d.index=c,d.value=""),-1===d.indexOf(a)){d.push(a);var e=j.indexOf(a,b+1);if(-1!==e){var f=j.slice(b+1,e),g=f.some(function(a){return"object"===typeof a});g&&!d.value?d.value=f:f.length&&(!d.value||"string"!==typeof d.value)&&(d.value=f.join(""))}}}}),k.forEach(function(a){a.length=0});for(var l,n={},o=0;o<j.length;o++)if(l=j[o],"object"==typeof l){var i=l.tabstopId,q=j.indexOf(l,o+1);if(n[i]){n[i]===l&&(n[i]=null);continue}var r=k[i],s="string"==typeof r.value?[r.value]:d(r.value);s.unshift(o+1,c(0,q-o)),s.push(l),n[i]=l,j.splice.apply(j,s),-1===r.indexOf(l)&&r.push(l)}var u=0,v=0,w="";j.forEach(function(a){if("string"===typeof a){var b=a.split("\n");1<b.length?(v=b[b.length-1].length,u+=b.length-1):v+=a.length,w+=a}else a.start?a.end={row:u,column:v}:a.start={row:u,column:v}});var t=a.getSelectionRange(),x=a.session.replace(t,w),y=new m(a),z=a.inVirtualSelectionMode&&a.selection.index;y.addTabstops(k,t.start,x,z)},this.insertSnippet=function(a,b){var c=this;return a.inVirtualSelectionMode?c.insertSnippetForSelection(a,b):void(a.forEachSelection(function(){c.insertSnippetForSelection(a,b)},null,{keepOrder:!0}),a.tabstopManager&&a.tabstopManager.tabNext())},this.$getScope=function(a){var b=a.session.$mode.$id||"";if(b=b.split("/").pop(),"html"===b||"php"===b){"php"!==b||a.session.$mode.inlinePhp||(b="html");var d=a.getCursorPosition(),c=a.session.getState(d.row);"object"===typeof c&&(c=c[0]),c.substring&&("js-"==c.substring(0,3)?b="javascript":"css-"==c.substring(0,4)?b="css":"php-"==c.substring(0,4)&&(b="php"))}return b},this.getActiveScopes=function(a){var b=this.$getScope(a),c=[b],d=this.snippetMap;return d[b]&&d[b].includeScopes&&c.push.apply(c,d[b].includeScopes),c.push("_"),c},this.expandWithTab=function(a,b){var c=this,d=a.forEachSelection(function(){return c.expandSnippetForSelection(a,b)},null,{keepOrder:!0});return d&&a.tabstopManager&&a.tabstopManager.tabNext(),d},this.expandSnippetForSelection=function(a,b){var c,d=a.getCursorPosition(),e=a.session.getLine(d.row),f=e.substring(0,d.column),g=e.substr(d.column),h=this.snippetMap;return(this.getActiveScopes(a).some(function(a){var b=h[a];return b&&(c=this.findMatchingSnippet(b,f,g)),!!c},this),!!c)&&(b&&b.dryRun||(a.session.doc.removeInLine(d.row,d.column-c.replaceBefore.length,d.column+c.replaceAfter.length),this.variables.M__=c.matchBefore,this.variables.T__=c.matchAfter,this.insertSnippetForSelection(a,c.content),this.variables.M__=this.variables.T__=null,!0))},this.findMatchingSnippet=function(a,b,c){for(var d,e=a.length;e--;)if(d=a[e],(!d.startRe||d.startRe.test(b))&&(!d.endRe||d.endRe.test(c))&&(d.startRe||d.endRe))return d.matchBefore=d.startRe?d.startRe.exec(b):[""],d.matchAfter=d.endRe?d.endRe.exec(c):[""],d.replaceBefore=d.triggerRe?d.triggerRe.exec(b)[0]:"",d.replaceAfter=d.endTriggerRe?d.endTriggerRe.exec(c)[0]:"",d},this.snippetMap={},this.snippetNameMap={},this.register=function(a,b){function c(a){return a&&!/^\^?\(.*\)\$?$|^\\b$/.test(a)&&(a="(?:"+a+")"),a||""}function d(a,b,d){return a=c(a),b=c(b),d?(a=b+a,a&&"$"!=a[a.length-1]&&(a+="$")):(a+=b,a&&"^"!=a[0]&&(a="^"+a)),new RegExp(a)}function e(a){a.scope||(a.scope=b||"_"),b=a.scope,g[b]||(g[b]=[],h[b]={});var c=h[b];if(a.name){var e=c[a.name];e&&i.unregister(e),c[a.name]=a}g[b].push(a),a.tabTrigger&&!a.trigger&&(!a.guard&&/^\w/.test(a.tabTrigger)&&(a.guard="\\b"),a.trigger=f.escapeRegExp(a.tabTrigger));(a.trigger||a.guard||a.endTrigger||a.endGuard)&&(a.startRe=d(a.trigger,a.guard,!0),a.triggerRe=new RegExp(a.trigger,"",!0),a.endRe=d(a.endTrigger,a.endGuard,!0),a.endTriggerRe=new RegExp(a.endTrigger,"",!0))}var g=this.snippetMap,h=this.snippetNameMap,i=this;a||(a=[]),a&&a.content?e(a):Array.isArray(a)&&a.forEach(e),this._signal("registerSnippets",{scope:b})},this.unregister=function(a,b){function c(a){var c=e[a.scope||b];if(c&&c[a.name]){delete c[a.name];var f=d[a.scope||b],g=f&&f.indexOf(a);0<=g&&f.splice(g,1)}}var d=this.snippetMap,e=this.snippetNameMap;a.content?c(a):Array.isArray(a)&&a.forEach(c)},this.parseSnippetFile=function(a){a=a.replace(/\r/g,"");for(var b,c=[],d={},e=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;b=e.exec(a);){if(b[1])try{d=JSON.parse(b[1]),c.push(d)}catch(a){}if(b[4])d.content=b[4].replace(/^\t/gm,""),c.push(d),d={};else{var f=b[2],g=b[3];if("regex"==f){var h=/\/((?:[^\/\\]|\\.)*)|$/g;d.guard=h.exec(g)[1],d.trigger=h.exec(g)[1],d.endTrigger=h.exec(g)[1],d.endGuard=h.exec(g)[1]}else"snippet"==f?(d.tabTrigger=g.match(/^\S*/)[0],d.name||(d.name=g)):d[f]=g}}return c},this.getSnippetByName=function(a,b){var c,d=this.snippetNameMap;return this.getActiveScopes(b).some(function(b){var e=d[b];return e&&(c=e[a]),!!c},this),c}}).call(l.prototype);var m=function(a){return a.tabstopManager?a.tabstopManager:void(a.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=f.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(a))};(function(){this.attach=function(a){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=a,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(a){var b="r"==a.action[0],c=a.start,d=a.end,e=c.row,f=d.row,g=f-e,h=d.column-c.column;if(b&&(g=-g,h=-h),!this.$inChange&&b){var j=this.selectedTabstop,l=j&&!j.some(function(a){return 0>=k(a.start,c)&&0<=k(a.end,d)});if(l)return this.detach()}for(var m,n=this.ranges,o=0;o<n.length;o++)if(m=n[o],!(m.end.row<c.row)){if(b&&0>k(c,m.start)&&0<k(d,m.end)){this.removeRange(m),o--;continue}m.start.row==e&&m.start.column>c.column&&(m.start.column+=h),m.end.row==e&&m.end.column>=c.column&&(m.end.column+=h),m.start.row>=e&&(m.start.row+=g),m.end.row>=e&&(m.end.row+=g),0<k(m.start,m.end)&&this.removeRange(m)}n.length||this.detach()},this.updateLinkedFields=function(){var a=this.selectedTabstop;if(a&&a.hasLinkedRanges){this.$inChange=!0;for(var c,d=this.editor.session,e=d.getTextRange(a.firstNonLinked),f=a.length;f--;)if(c=a[f],c.linked){var g=b.snippetManager.tmStrFormat(e,c.original);d.replace(c,g)}this.$inChange=!1}},this.onAfterExec=function(a){a.command&&!a.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var a=this.editor.selection.lead,b=this.editor.selection.anchor,c=this.editor.selection.isEmpty(),d=this.ranges.length;d--;)if(!this.ranges[d].linked){var e=this.ranges[d].contains(a.row,a.column),f=c||this.ranges[d].contains(b.row,b.column);if(e&&f)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(a){var b=this.tabstops.length,d=this.index+(a||1);d=Math.min(c(d,1),b),d==b&&(d=0),this.selectTabstop(d),0===d&&this.detach()},this.selectTabstop=function(a){this.$openTabstops=null;var b=this.tabstops[this.index];if(b&&this.addTabstopMarkers(b),this.index=a,b=this.tabstops[this.index],b&&b.length){if(this.selectedTabstop=b,!this.editor.inVirtualSelectionMode){var c=this.editor.multiSelect;c.toSingleRange(b.firstNonLinked.clone());for(var d=b.length;d--;)b.hasLinkedRanges&&b[d].linked||c.addRange(b[d].clone(),!0);c.ranges[0]&&c.addRange(c.ranges[0].clone())}else this.editor.selection.setRange(b.firstNonLinked);this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)}},this.addTabstops=function(a,b,c){if(this.$openTabstops||(this.$openTabstops=[]),!a[0]){var d=g.fromPoints(c,c);q(d.start,b),q(d.end,b),a[0]=[d],a[0].index=0}var e=this.index,f=[e+1,0],h=this.ranges;a.forEach(function(a,c){for(var d=this.$openTabstops[c]||a,e=a.length;e--;){var i=a[e],j=g.fromPoints(i.start,i.end||i.start);o(j.start,b),o(j.end,b),j.original=i,j.tabstop=d,h.push(j),d==a?d[e]=j:d.unshift(j),i.fmtString?(j.linked=!0,d.hasLinkedRanges=!0):!d.firstNonLinked&&(d.firstNonLinked=j)}d.firstNonLinked||(d.hasLinkedRanges=!1),d===a&&(f.push(d),this.$openTabstops[c]=d),this.addTabstopMarkers(d)},this),2<f.length&&(this.tabstops.length&&f.push(f.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,f))},this.addTabstopMarkers=function(a){var b=this.editor.session;a.forEach(function(a){a.markerId||(a.markerId=b.addMarker(a,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(a){var b=this.editor.session;a.forEach(function(a){b.removeMarker(a.markerId),a.markerId=null})},this.removeRange=function(a){var b=a.tabstop.indexOf(a);a.tabstop.splice(b,1),b=this.ranges.indexOf(a),this.ranges.splice(b,1),this.editor.session.removeMarker(a.markerId),a.tabstop.length||(b=this.tabstops.indexOf(a.tabstop),-1!=b&&this.tabstops.splice(b,1),!this.tabstops.length&&this.detach())},this.keyboardHandler=new i,this.keyboardHandler.bindKeys({Tab:function(a){b.snippetManager&&b.snippetManager.expandWithTab(a)||a.tabstopManager.tabNext(1)},"Shift-Tab":function(a){a.tabstopManager.tabNext(-1)},Esc:function(a){a.tabstopManager.detach()},Return:function(){return!1}})}).call(m.prototype);var n={onChange:h.prototype.onChange,setPosition:function(a,b){this.pos.row=a,this.pos.column=b},update:function(a,b,c){this.$insertRight=c,this.pos=a,this.onChange(b)}},o=function(a,b){0==a.row&&(a.column+=b.column),a.row+=b.row},q=function(a,b){a.row==b.row&&(a.column-=b.column),a.row-=b.row};a("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),b.snippetManager=new l;var p=a("./editor").Editor;(function(){this.insertSnippet=function(a,c){return b.snippetManager.insertSnippet(this,a,c)},this.expandSnippet=function(a){return b.snippetManager.expandWithTab(this,a)}}).call(p.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(a,b){"use strict";var c=a("../virtual_renderer").VirtualRenderer,d=a("../editor").Editor,e=a("../range").Range,f=a("../lib/event"),g=a("../lib/lang"),h=a("../lib/dom"),i=function(a){var b=new c(a);b.$maxLines=4;var e=new d(b);return e.setHighlightActiveLine(!1),e.setShowPrintMargin(!1),e.renderer.setShowGutter(!1),e.renderer.setHighlightGutterLine(!1),e.$mouseHandler.$focusWaitTimout=0,e.$highlightTagPending=!0,e};h.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}"),b.AcePopup=function(a){var b=h.createElement("div"),d=new i(b);a&&a.appendChild(b),b.style.display="none",d.renderer.content.style.cursor="default",d.renderer.setStyle("ace_autocomplete"),d.setOption("displayIndentGuides",!1),d.setOption("dragDelay",150);var c=function(){};d.focus=c,d.$isFocused=!0,d.renderer.$cursorLayer.restartTimer=c,d.renderer.$cursorLayer.element.style.opacity=0,d.renderer.$maxLines=8,d.renderer.$keepTextAreaAtCursor=!1,d.setHighlightActiveLine(!1),d.session.highlight(""),d.session.$searchHighlight.clazz="ace_highlight-marker",d.on("mousedown",function(a){var b=a.getDocumentPosition();d.selection.moveToPosition(b),l.start.row=l.end.row=b.row,a.stop()});var j,k=new e(-1,0,-1,Infinity),l=new e(-1,0,-1,Infinity);l.id=d.session.addMarker(l,"ace_active-line","fullLine"),d.setSelectOnHover=function(a){a?k.id&&(d.session.removeMarker(k.id),k.id=null):k.id=d.session.addMarker(k,"ace_line-hover","fullLine")},d.setSelectOnHover(!1),d.on("mousemove",function(a){if(!j)return void(j=a);if(j.x!=a.x||j.y!=a.y){j=a,j.scrollTop=d.renderer.scrollTop;var b=j.getDocumentPosition().row;k.start.row!=b&&(!k.id&&d.setRow(b),n(b))}}),d.renderer.on("beforeRender",function(){if(j&&-1!=k.start.row){j.$pos=null;var a=j.getDocumentPosition().row;k.id||d.setRow(a),n(a,!0)}}),d.renderer.on("afterRender",function(){var a=d.getRow(),b=d.renderer.$textLayer,c=b.element.childNodes[a-b.config.firstRow];c==b.selectedNode||(b.selectedNode&&h.removeCssClass(b.selectedNode,"ace_selected"),b.selectedNode=c,c&&h.addCssClass(c,"ace_selected"))});var m=function(){n(-1)},n=function(a,b){a!==k.start.row&&(k.start.row=k.end.row=a,!b&&d.session._emit("changeBackMarker"),d._emit("changeHoverMarker"))};d.getHoveredRow=function(){return k.start.row},f.addListener(d.container,"mouseout",m),d.on("hide",m),d.on("changeSelection",m),d.session.doc.getLength=function(){return d.data.length},d.session.doc.getLine=function(a){var b=d.data[a];return"string"==typeof b?b:b&&b.value||""};var o=d.session.bgTokenizer;return o.$tokenizeRow=function(a){var b=d.data[a],e=[];if(!b)return e;"string"==typeof b&&(b={value:b}),b.caption||(b.caption=b.value||b.name);for(var f,g,h=-1,j=0;j<b.caption.length;j++)g=b.caption[j],f=b.matchMask&1<<j?1:0,h===f?e[e.length-1].value+=g:(e.push({type:b.className||""+(f?"completion-highlight":""),value:g}),h=f);if(b.meta){var i=d.renderer.$size.scrollerWidth/d.renderer.layerConfig.characterWidth,k=b.meta;k.length+b.caption.length>i-2&&(k=k.substr(0,i-b.caption.length-3)+"\u2026"),e.push({type:"rightAlignedText",value:k})}return e},o.$updateOnChange=c,o.start=c,d.session.$computeWidth=function(){return this.screenWidth=0},d.$blockScrolling=Infinity,d.isOpen=!1,d.isTopdown=!1,d.autoSelect=!0,d.data=[],d.setData=function(a){d.setValue(g.stringRepeat("\n",a.length),-1),d.data=a||[],d.setRow(0)},d.getData=function(a){return d.data[a]},d.getRow=function(){return l.start.row},d.setRow=function(a){a=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,a)),l.start.row!=a&&(d.selection.clearSelection(),l.start.row=l.end.row=a||0,d.session._emit("changeBackMarker"),d.moveCursorTo(a||0,0),d.isOpen&&d._signal("select"))},d.on("changeSelection",function(){d.isOpen&&d.setRow(d.selection.lead.row),d.renderer.scrollCursorIntoView()}),d.hide=function(){this.container.style.display="none",this._signal("hide"),d.isOpen=!1},d.show=function(a,b,c){var e=this.container,f=window.innerHeight,g=window.innerWidth,h=this.renderer,i=1.4*(h.$maxLines*b),k=a.top+this.$borderSize,l=k>f/2&&!c;l&&k+b+i>f?(h.$maxPixelHeight=k-2*this.$borderSize,e.style.top="",e.style.bottom=f-k+"px",d.isTopdown=!1):(k+=b,h.$maxPixelHeight=f-k-0.2*b,e.style.top=k+"px",e.style.bottom="",d.isTopdown=!0),e.style.display="",this.renderer.$textLayer.checkForSizeChanges();var m=a.left;m+e.offsetWidth>g&&(m=g-e.offsetWidth),e.style.left=m+"px",this._signal("show"),j=null,d.isOpen=!0},d.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},d.$imageSize=0,d.$borderSize=1,d}}),ace.define("ace/autocomplete/util",["require","exports","module"],function(a,b){"use strict";b.parForEach=function(a,b,c){var d=0,e=a.length;0===e&&c();for(var f=0;f<e;f++)b(a[f],function(a,b){d++,d===e&&c(a,b)})};var c=/[a-zA-Z_0-9\$\-\u00A2-\uFFFF]/;b.retrievePrecedingIdentifier=function(a,b,d){d=d||c;for(var e=[],f=b-1;0<=f&&d.test(a[f]);f--)e.push(a[f]);return e.reverse().join("")},b.retrieveFollowingIdentifier=function(a,b,d){d=d||c;for(var e=[],f=b;f<a.length&&d.test(a[f]);f++)e.push(a[f]);return e},b.getCompletionPrefix=function(a){var b,c=a.getCursorPosition(),d=a.session.getLine(c.row);return a.completers.forEach(function(a){a.identifierRegexps&&a.identifierRegexps.forEach(function(a){!b&&a&&(b=this.retrievePrecedingIdentifier(d,c.column,a))}.bind(this))}.bind(this)),b||this.retrievePrecedingIdentifier(d,c.column)}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/snippets"],function(a,b){"use strict";var c=a("./keyboard/hash_handler").HashHandler,d=a("./autocomplete/popup").AcePopup,e=a("./autocomplete/util"),f=a("./lib/event"),g=a("./lib/lang"),h=a("./lib/dom"),j=a("./snippets").snippetManager,i=function(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new c,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=g.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=g.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){return this.popup=new d(document.body||document.documentElement),this.popup.on("click",function(a){this.insertMatch(),a.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(a,b,c){this.popup||this.$init(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered),a.keyBinding.addKeyboardHandler(this.keyboardHandler);var d=a.renderer;if(this.popup.setRow(this.autoSelect?0:-1),!c){this.popup.setTheme(a.getTheme()),this.popup.setFontSize(a.getFontSize());var e=d.layerConfig.lineHeight,f=d.$cursorLayer.getPixelPosition(this.base,!0);f.left-=this.popup.getTextLeftOffset();var g=a.container.getBoundingClientRect();f.top+=g.top-d.layerConfig.offset,f.left+=g.left-a.renderer.scrollLeft,f.left+=d.gutterWidth,this.popup.show(f,e)}else c&&!b&&this.detach()},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(){var a=this.editor.selection.lead;(a.row!=this.base.row||a.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(a){var b=document.activeElement,c=this.editor.textInput.getElement(),d=a.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(a.relatedTarget),e=this.popup&&this.popup.container;b==c||b.parentNode==e||d||b==this.tooltipNode||a.relatedTarget==c||this.detach()},this.mousedownListener=function(){this.detach()},this.mousewheelListener=function(){this.detach()},this.goTo=function(a){var b=this.popup.getRow(),c=this.popup.session.getLength()-1;"up"===a?b=0>=b?c:b-1:"down"===a?b=b>=c?-1:b+1:"start"===a?b=0:"end"===a?b=c:void 0;this.popup.setRow(b)},this.insertMatch=function(a){if(a||(a=this.popup.getData(this.popup.getRow())),!a)return!1;if(a.completer&&a.completer.insertMatch)a.completer.insertMatch(this.editor,a);else{if(this.completions.filterText)for(var b,c=this.editor.selection.getAllRanges(),d=0;b=c[d];d++)b.start.column-=this.completions.filterText.length,this.editor.session.remove(b);a.snippet?j.insertSnippet(this.editor,a.snippet):this.editor.execCommand("insertstring",a.value||a)}this.detach()},this.commands={Up:function(a){a.completer.goTo("up")},Down:function(a){a.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(a){a.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(a){a.completer.goTo("end")},Esc:function(a){a.completer.detach()},Return:function(a){return a.completer.insertMatch()},"Shift-Return":function(a){a.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(a){var b=a.completer.insertMatch();return b||a.tabstopManager?b:void a.completer.goTo("down")},PageUp:function(a){a.completer.popup.gotoPageUp()},PageDown:function(a){a.completer.popup.gotoPageDown()}},this.gatherCompletions=function(a,b){var c=a.getSession(),d=a.getCursorPosition(),f=e.getCompletionPrefix(a);this.base=c.doc.createAnchor(d.row,d.column-f.length),this.base.$insertRight=!0;var g=[],h=a.completers.length;return a.completers.forEach(function(i){i.getCompletions(a,c,d,f,function(c,d){!c&&d&&(g=g.concat(d)),b(null,{prefix:e.getCompletionPrefix(a),matches:g,finished:0===--h})})}),!0},this.showPopup=function(a){this.editor&&this.detach(),this.activated=!0,this.editor=a,a.completer!=this&&(a.completer&&a.completer.detach(),a.completer=this),a.on("changeSelection",this.changeListener),a.on("blur",this.blurListener),a.on("mousedown",this.mousedownListener),a.on("mousewheel",this.mousewheelListener),this.updateCompletions()},this.updateCompletions=function(a){if(a&&this.base&&this.completions){var b=this.editor.getCursorPosition(),c=this.editor.session.getTextRange({start:this.base,end:b});return c==this.completions.filterText?void 0:(this.completions.setFilter(c),!this.completions.filtered.length)?this.detach():1!=this.completions.filtered.length||this.completions.filtered[0].value!=c||this.completions.filtered[0].snippet?void this.openPopup(this.editor,c,a):this.detach()}var d=this.gatherCompletionsId;this.gatherCompletions(this.editor,function(b,c){var e=function(){return c.finished?this.detach():void 0}.bind(this),f=c.prefix,g=c&&c.matches;if(!g||!g.length)return e();if(0===f.indexOf(c.prefix)&&d==this.gatherCompletionsId){this.completions=new k(g),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(f);var h=this.completions.filtered;return h.length?1!=h.length||h[0].value!=f||h[0].snippet?this.autoInsert&&1==h.length&&c.finished?this.insertMatch(h[0]):void this.openPopup(this.editor,f,a):e():e()}}.bind(this))},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var a=this.popup,b=a.data,c=b&&(b[a.getHoveredRow()]||b[a.getRow()]),d=null;return c&&this.editor&&this.popup.isOpen?(this.editor.completers.some(function(a){return a.getDocTooltip&&(d=a.getDocTooltip(c)),d}),d||(d=c),"string"==typeof d&&(d={docText:d}),d&&(d.docHTML||d.docText)?void this.showDocTooltip(d):this.hideDocTooltip()):this.hideDocTooltip()},this.showDocTooltip=function(a){this.tooltipNode||(this.tooltipNode=h.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this));var b=this.tooltipNode;a.docHTML?b.innerHTML=a.docHTML:a.docText&&(b.textContent=a.docText),b.parentNode||document.body.appendChild(b);var c=this.popup,d=c.container.getBoundingClientRect();b.style.top=c.container.style.top,b.style.bottom=c.container.style.bottom,320>window.innerWidth-d.right?(b.style.right=window.innerWidth-d.left+"px",b.style.left=""):(b.style.left=d.right+1+"px",b.style.right=""),b.style.display="block"},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var a=this.tooltipNode;this.editor.isFocused()||document.activeElement!=a||this.editor.focus(),this.tooltipNode=null,a.parentNode&&a.parentNode.removeChild(a)}},this.onTooltipClick=function(b){for(var c=b.target;c&&c!=this.tooltipNode;){if("A"==c.nodeName&&c.href){c.rel="noreferrer",c.target="_blank";break}c=c.parentNode}}}).call(i.prototype),i.startCommand={name:"startAutocomplete",exec:function(a){a.completer||(a.completer=new i),a.completer.autoInsert=!1,a.completer.autoSelect=!0,a.completer.showPopup(a),a.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var k=function(a,b){this.all=a,this.filtered=a,this.filterText=b||"",this.exactMatch=!1};(function(){this.setFilter=function(a){if(a.length>this.filterText&&0===a.lastIndexOf(this.filterText,0))var b=this.filtered;else var b=this.all;this.filterText=a,b=this.filterCompletions(b,this.filterText),b=b.sort(function(c,a){return a.exactMatch-c.exactMatch||a.score-c.score});var c=null;b=b.filter(function(a){var b=a.snippet||a.caption||a.value;return b!==c&&(c=b,!0)}),this.filtered=b},this.filterCompletions=function(a,b){var c=[],d=b.toUpperCase(),e=b.toLowerCase();loop:for(var f,g,h=0;f=a[h];h++)if(g=f.value||f.caption||f.snippet,g){var i,k,l=-1,m=0,n=0;if(!this.exactMatch)for(var o=0;o<b.length;o++){var j=g.indexOf(e[o],l+1),p=g.indexOf(d[o],l+1);if(i=0<=j?0>p||j<p?j:p:p,0>i)continue loop;k=i-l-1,0<k&&(-1===l&&(n+=10),n+=k),m|=1<<i,l=i}else if(b!==g.substr(0,b.length))continue loop;f.matchMask=m,f.exactMatch=n?0:1,f.score=(f.score||0)-n,c.push(f)}return c}}).call(k.prototype),b.Autocomplete=i,b.FilteredList=k}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(a,b){function c(a,b){var c=a.getTextRange(e.fromPoints({row:0,column:0},b));return c.split(f).length-1}function d(a,b){var d=c(a,b),e=a.getValue().split(f),g=Object.create(null),h=e[d];return e.forEach(function(a,b){if(a&&a!==h){var c=Math.abs(d-b),f=e.length-c;g[a]=g[a]?Math.max(f,g[a]):f}}),g}var e=a("../range").Range,f=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;b.getCompletions=function(a,b,c,e,f){var g=d(b,c,e),h=Object.keys(g);f(null,h.map(function(a){return{caption:a,value:a,score:g[a],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(a,b){"use strict";var c=a("../snippets").snippetManager,d=a("../autocomplete").Autocomplete,e=a("../config"),f=a("../lib/lang"),g=a("../autocomplete/util"),h=a("../autocomplete/text_completer"),i={getCompletions:function(a,b,c,d,e){if(b.$mode.completer)return b.$mode.completer.getCompletions(a,b,c,d,e);var f=a.session.getState(c.row),g=b.$mode.getCompletions(f,b,c,d);e(null,g)}},j={getCompletions:function(a,b,d,e,f){var g=c.snippetMap,h=[];c.getActiveScopes(a).forEach(function(a){for(var b=g[a]||[],c=b.length;c--;){var d=b[c],e=d.name||d.tabTrigger;e&&h.push({caption:e,snippet:d.content,meta:d.tabTrigger&&!d.name?d.tabTrigger+"\u21E5 ":"snippet",type:"snippet"})}},this),f(null,h)},getDocTooltip:function(a){"snippet"!=a.type||a.docHTML||(a.docHTML=["<b>",f.escapeHTML(a.caption),"</b>","<hr></hr>",f.escapeHTML(a.snippet)].join(""))}},k=[j,h,i];b.setCompleters=function(a){k.length=0,a&&k.push.apply(k,a)},b.addCompleter=function(a){k.push(a)},b.textCompleter=h,b.keyWordCompleter=i,b.snippetCompleter=j;var l={name:"expandSnippet",exec:function(a){return c.expandWithTab(a)},bindKey:"Tab"},m=function(a,b){n(b.session.$mode)},n=function(a){var b=a.$id;c.files||(c.files={}),o(b),a.modes&&a.modes.forEach(n)},o=function(a){if(a&&!c.files[a]){var b=a.replace("mode","snippets");c.files[a]={},e.loadModule(b,function(b){b&&(c.files[a]=b,!b.snippets&&b.snippetText&&(b.snippets=c.parseSnippetFile(b.snippetText)),c.register(b.snippets||[],b.scope),b.includeScopes&&(c.snippetMap[b.scope].includeScopes=b.includeScopes,b.includeScopes.forEach(function(a){o("ace/mode/"+a)})))})}},p=function(a){var b=a.editor,c=b.completer&&b.completer.activated;if("backspace"===a.command.name)c&&!g.getCompletionPrefix(b)&&b.completer.detach();else if("insertstring"===a.command.name){var e=g.getCompletionPrefix(b);e&&!c&&(!b.completer&&(b.completer=new d),b.completer.autoInsert=!1,b.completer.showPopup(b))}},q=a("../editor").Editor;a("../config").defineOptions(q.prototype,"editor",{enableBasicAutocompletion:{set:function(a){a?(!this.completers&&(this.completers=Array.isArray(a)?a:k),this.commands.addCommand(d.startCommand)):this.commands.removeCommand(d.startCommand)},value:!1},enableLiveAutocompletion:{set:function(a){a?(!this.completers&&(this.completers=Array.isArray(a)?a:k),this.commands.on("afterExec",p)):this.commands.removeListener("afterExec",p)},value:!1},enableSnippets:{set:function(a){a?(this.commands.addCommand(l),this.on("changeMode",m),m(null,this)):(this.commands.removeCommand(l),this.off("changeMode",m))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(){})}();