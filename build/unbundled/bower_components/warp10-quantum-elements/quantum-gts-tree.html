<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../warp10-iron/warp10-gts-tools.html"><link rel="import" href="../warp10-iron/warp10-gts-plotting-tools.html"><link rel="import" href="./quantum-module-mixin.html"></head><body><dom-module id="quantum-gts-tree"><template><style>:host{display:block;}.popover{max-width:none;max-height:none;}div[hidden], i[hidden]{display:none;}ul{margin:0;padding:0;list-style:none;border:none;overflow:hidden;}li{position:relative;padding:0 0 0 20px;line-height:20px;}li .stack-level{font-size:1.25em;font-weight:bold;padding-top:25px;padding-bottom:10px;}li .stack-level + div{padding-left:25px;}li .expanded{padding:1px 10px;background:url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAAKElEQVQ4jWNgGFbgFQMDw38i8UuYJiYkA5hJsIwUtXQEo2EwGgZkAwBP/yN0kY5JiwAAAABJRU5ErkJggg==) no-repeat;}li .collapsed{padding:1px 10px;background:url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAAXUlEQVQ4jWNgGCzgJwMDw38S8U8GBgYGJqgBjGRYSo4e3GAfAwMDP5oYIW/9RFb8n4GB4RQDA4MgktgvAgb8QjfgPwMDwyxyvYDNBSR54SADZhiQ5AWKwTBISAMHAKXXR27jzC2pAAAAAElFTkSuQmCC) no-repeat;}li .gtsInfo{white-space:normal;word-wrap:break-word;}li .gtsInfo[disabled]{color:#aaaaaa;cursor:not-allowed;}li .normal{}li .normal{border-radius:50%;background-color:#bbbbbb;display:inline-block;width:12px;height:12px;}li i, li span{cursor:pointer;}li .selected{background-color:#aaddff;font-weight:bold;padding:1px 5px;}.gts-classname{color:#0074D9;}.gts-labelname{color:#3d9970;}.gts-separator{color:#bbbbbb;}.gts-labelvalue{color:#AAAAAA;font-style:italic;}</style><ul><template is="dom-repeat" items="{{data.content}}" as="node"><li><div hidden$="{{branch}}" class="stack-level" on-tap="selectNodeHead" data-node="{{node}}">Stack level {{index}}</div><div><i class="collapsed" hidden$="{{isNotCollapsed(node)}}" on-tap="selectNodeHead"></i> <i class="expanded" hidden$="{{isCollapsed(node)}}" on-tap="selectNodeHead"></i><template is="dom-if" if="{{isGts(node)}}"><i class="normal" style$="{{gtsColor(node.gts, plottedChanged)}}" on-tap="switchPlotState"></i> <span class="gtsInfo" on-tap="switchPlotState"><span class="gts-classname">{{node.gts.c}}</span> <span class="gts-separator">{</span><template is="dom-repeat" items="{{_toArray(node.gts.l)}}" as="label"><span><span class="gts-labelname">{{label.name}}</span> <span class="gts-separator">=</span> <span class="gts-labelvalue">{{label.value}}</span> <span hidden$="{{_lastIndex(index, node.gts.l)}}">,</span></span></template><span class="gts-separator">}</span></span></template><template is="dom-if" if="{{isImage(node)}}"><i class="normal" style="background-color:#000000;"></i> <span class="gtsInfo" on-mouseover="showImageOverlay" on-mouseout="hideImageOverlay" on-tap="showImageOverlay"><span class="gts-classname">{{node.caption}}</span></span></template><template is="dom-if" if="[[node.content]]"><span class="listInfo">List of [[node.content.length]] item<template is="dom-if" if="[[_hasMoreThanOne(node.content)]]">s</template></span><quantum-gts-tree id="gts-tree" data="{{node}}" branch="" debug="[[debug]]" plotted-changed="{{plottedChanged}}"></quantum-gts-tree></template></div></li></template></ul></template></dom-module><script>class QuantumGTSTree extends Warp10QuantumModuleMixin(Polymer.Element){static get is(){return'quantum-gts-tree'}static get properties(){return{data:{type:Array,observer:'dataChanged'},stringifiedData:{type:String,computed:'stringifyData(data)'},treeId:{type:String},nodeId:{type:String,value:'id'},nodeLabel:{type:String,value:'label'},nodeChildren:{type:String,value:'children'},branch:{type:Boolean,value:!1},plottedChanged:{type:Number,value:0,notify:!0},debug:{type:Boolean,value:!1}}}ready(){super.ready(),this.maxColors=20}_hasMoreThanOne(a){return 1<a.length}stringifyData(){return JSON.stringify(this.data)}dataChanged(){this.debug&&console.debug('[quantum-gts-tree] dataChanged',this.data),this.dispatchEvent(new CustomEvent('plotted-changed',{detail:plottingTools,bubbles:!0,composed:!0})),this.plottedChanged++}selectNodeHead(a){return this.debug&&console.debug('[quantum-gts-tree] selectNodeHead',a.model.node),a.model.node.collapsed=!a.model.node.collapsed}switchPlotState(a){this.debug&&console.debug('[quantum-gts-tree] switchPlotState',a.model.node.gts);let b=a.model.node.gts;plottingTools.isPlotted(b)?(plottingTools.remove(b),this.debug&&console.log('[quantum-gts-tree] removeFromPlot',plottingTools)):(plottingTools.add(b),this.debug&&console.log('[quantum-gts-tree] addToPlot',plottingTools)),this.dispatchEvent(new CustomEvent('plotted-changed',{detail:plottingTools,bubbles:!0,composed:!0})),this.plottedChanged++}isCollapsed(a){return!!(a.content===void 0||a.collapsed)}isNotCollapsed(a){return a.content===void 0||!a.collapsed}hasContent(a){return a.content!==void 0}isImage(a){return a.image!==void 0}isGts(a){return a.gts!==void 0}gtsColor(a){return void 0===a?'':(this.debug&&(console.debug('[quantum-gts-tree] gtsColor',plottingTools.color),console.debug('[quantum-gts-tree] gtsColor',plottingTools.id)),plottingTools.gtsColor(a))}showImageOverlay(a){this.debug&&console.debug('[quantum-gts-tree] showImageOverlay',a);let b=a.model.node.image,c=a.model.node.caption,d=a.type;this.dispatchEvent(new CustomEvent('show-image',{detail:{image:b,caption:c,type:d}}))}hideImageOverlay(){this.dispatchEvent(new CustomEvent('hide-image'))}_toArray(a){return void 0===a?[]:Object.keys(a).map(function(b){return{name:b,value:a[b]}})}_lastIndex(a,b){let c=this._toArray(b);return a===c.length-1}}customElements.define(QuantumGTSTree.is,QuantumGTSTree);</script></body></html>